{% extends "base.html.jinja2" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/file-dnd.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/data.css') }}" />
{% endblock %}

{% block resources %}
<script src="{{ url_for('static', filename='js/file-dnd.js') }}"></script>
<script src="{{ url_for('static', filename='js/data.js') }}"></script>
{% endblock %}

{% block content %}

<h2 class="h5">Upload a {{ type }} corpus</h2>

    <form class="data-upload-form" action="{{ url_for('data.data_upload_perform', type=type) }}" enctype="multipart/form-data" method="post">
        <div class="form-group row">
            <div class="col-6">
                <label for="name">Name</label>
                <input required type="text" class="form-control" id="name" name="name" placeholder="Write a name..." />
            </div>
        </div>

        <div class="form-group row">
            <div class="col-12 col-sm-6">
                <div class="p-3 bg-light">
                    <label for="source_file">Source file</label>
                    <select class="custom-select mb-2 source_lang" name="source_lang">
                        {% for language in languages %}
                            <option value="{{ language.code }}">{{ language.name }}</option>
                        {% endfor %}
                    </select>

                    {% with file_dnd_id = "source_file" %}
                        {% include "file-dnd.html.jinja2" %}
                    {% endwith %}
                </div>
            </div>

            {% if type == "bilingual" %}
            <div class="col-12 col-sm-6 mt-3 mt-sm-0">
                <div class="p-3 bg-light">
                    <label for="target_file">Target file</label>
                    <select class="custom-select mb-2 target_lang" name="target_lang">
                        {% for language in languages %}
                            <option value="{{ language.code }}">{{ language.name }}</option>
                        {% endfor %}
                    </select>

                    {% with file_dnd_id = "target_file" %}
                        {% include "file-dnd.html.jinja2" %}
                    {% endwith %}
                </div>
            </div>
            {% endif %}

        </div>
        <div class="row">
            <div class="col-12 col-sm-6 {{ 'offset-sm-6' if type == 'bilingual' else '' }} text-right">
                <input class="btn btn-primary" type="submit" id="submit" value="Upload" />
            </div>
        </div>

        <div class="row mt-3 token-alert d-none">
            <div class="col-12">
                <div class="alert alert-warning d-flex">
                    <div class="mr-3">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>

                    <div>
                        Tokenising your data...
                        <br />
                        this could take a while
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}