{% extends "library.html.jinja2" %}

{% block library_content %}

<h2 class="h5">Upload corpora</h2>

<form class="data-upload-form" action="{{ url_for('data.data_upload_perform') }}" enctype="multipart/form-data" method="post">
    <fieldset>
        <div class="row">
            <div class="col-12">
                <div class="bg-light p-3 neural-bg">
                    <div class="row">
                        <div class="form-group col-12 col-sm-6">
                            <label for="name">Name</label>
                            <input required type="text" class="form-control" id="name" name="name" placeholder="Write a name..." />
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-12 col-sm-6">
                            <label for="description">Description</label>
                            <textarea class="form-control" id="description" name="description" placeholder="Write a description..." rows="1"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <ul class="nav nav-tabs upload-nav-tabs">
                            <li class="nav-item">
                                <a href="#" class="nav-link active bilingual-nav-tab">Bilingual</a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link monolingual-nav-tab">Monolingual</a>
                            </li>
                        </ul>
                    </div>

                    <div class="form-group row">
                        <div class="col-12 col-sm-6">
                            <label for="source_file">Source file</label>
                            <select class="custom-select mb-2 source_lang" name="source_lang">
                                {% for language in languages %}
                                    <option value="{{ language.code }}">{{ language.name }}</option>
                                {% endfor %}
                            </select>

                            {% with file_dnd_id = "source_file" %}
                                {% include "file-dnd.html.jinja2" %}
                            {% endwith %}
                        </div>

                        <div class="col-12 col-sm-6 mt-3 mt-sm-0 target-file-col">
                            <label for="target_file">Target file</label>
                            <select class="custom-select mb-2 target_lang" name="target_lang">
                                {% for language in languages %}
                                    <option value="{{ language.code }}">{{ language.name }}</option>
                                {% endfor %}
                            </select>

                            {% with file_dnd_id = "target_file" %}
                                {% include "file-dnd.html.jinja2" %}
                            {% endwith %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group row mt-4">
            <div class="col-12 col-sm-5">
                <div class="token-alert d-none">
                    <div class="d-flex align-items-center">
                        {% include "cloud.html.jinja2" %}
                        <div class="h6 ml-3">
                            We're checking your data! Corpora should be plain text and have
                            the same length and one sentence per line. This might take some time...
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 offset-sm-5 col-sm-2 text-right">
                <input class="btn btn-primary" type="submit" id="submit" value="Upload" />
            </div>
        </div>
    </fieldset>
</form>

<h2 class="h5 sr-only">Your corpora</h2>
<ul class="mt-4 nav nav-tabs corpora-nav-tabs">
    <li class="nav-item">
        <a class="nav-link active private-nav-tab" data-toggle="tab" href="#private-corpora">Your corpora</a>
    </li>
    <li class="nav-item">
        <a class="nav-link public-nav-tab" data-toggle="tab" href="#public-corpora">Public corpora</a>
    </li>
</ul>

<div class="tab-content corpora-tab">
    <div class="tab-pane fade show active pt-4" id="private-corpora">
        {% if user_library|length > 0 %}
        <div class="table-responsive">
            <table class="table table-bordered corpora-table w-100">
                <thead class="d-none">
                    <th></th>
                    <th>File name</th>
                    <th>Language</th>
                    <th>Lines</th>
                    <th>Words</th>
                    <th>Chars</th>
                    <th>Date</th>
                    <th></th>
                </thead>
            </table>
        </div>
        {% else %}
        <div class="jumbotron p-3 text-center">
            <p class="h6 m-0">
                Nothing yet! <a href="{{ url_for('library.library_corpora') }}">Upload a corpus now</a> or grab one
            </p>
        </div>
        {% endif %}
    </div>
    <div class="tab-pane fade pt-4" id="public-corpora">
        <div class="table-responsive">
            <table class="table table-bordered corpora-table w-100" data-public="true">
                <thead class="d-none">
                    <th></th>
                    <th>File name</th>
                    <th>Language</th>
                    <th>Lines</th>
                    <th>Words</th>
                    <th>Chars</th>
                    <th>Date</th>
                    <th></th>
                </thead>
            </table>
        </div>
    </div>
</div>

<template id="corpus-header-template">
    <tr class="corpus-header">
        <th class="corpus_icon">
            <div class="folder-shared folder-indicator text-center d-none">
                <i class="folder-icon fas fa-folder"></i>
                <i class="second-icon fas fa-share-alt-square text-success bg-white"></i>
            </div>
            <div class="folder-grabbed folder-indicator text-center d-none">
                <i class="folder-icon fas fa-folder"></i>
                <i class="second-icon fas fas fa-user text-warning"></i>
            </div>
            <div class="folder-owner text-center d-none">
                <i class="folder-icon fas fa-folder"></i>
            </div>
        </th>
        <th class="corpus_name"></th>
        <th class="corpus_lang" colspan="3">
            <span class="corpus_lang_src"></span> <span class="corpus_lang_trg"></span>
        </th>
        <th class="corpus_uploader" colspan="2">
            
        </th>
        <th class="corpus_actions">
            <div class="dropdown">
                <button class="btn btn-link btn-sm px-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-ellipsis-v"></i> <span class="sr-only">Options</span>
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                    <a href="#" class="corpus-preview dropdown-item">
                        <i class="fas fa-stream"></i> Preview
                    </a>

                    <a href="#" class="corpus-stop-share d-none dropdown-item">
                        <i class="fas fa-lock"></i> Stop sharing
                    </a>

                    <a href="#" class="corpus-share d-none dropdown-item">
                        <i class="fas fa-lock-open"></i> Share
                    </a>

                    <a href="#" class="export-btn dropdown-item">
                        <i class="fas fa-download"></i> Download
                    </a>

                    <a href="#" class="corpus-delete d-none dropdown-item text-danger">
                        <i class="fas fa-trash"></i> Delete
                    </a>

                    <a href="#" class="corpus-ungrab d-none dropdown-item text-danger">
                        <i class="fas fa-times"></i> Remove
                    </a>

                    <a href="#" class="grab-btn dropdown-item d-none">
                        <i class="fas fa-file-import"></i> Grab
                    </a>
                </div>
            </div>
        </th>
    </tr>
    <tr class="bg-light corpus-description-row">
        <td class="border-right-0"></td>
        <td class="overflow" colspan="7">
            <div class="font-weight-normal corpus_description"></div>
        </td>
    </tr>
    <tr>
        <th class="border-right-0"></th>
        <th>File name</th>
        <th>Language</th>
        <th>Lines</th>
        <th>Words</th>
        <th>Chars</th>
        <th>Date</th>
        <th></th>
    </tr>
</template>

<template id="corpus-entry-template">
    <div class="d-flex align-items-center file-item">
        <i class="fas fa-file mr-2"></i>
        <span class="file-name"></span>
    </div>
</template>

<template id="preview-button-template">
    <a class="file-item-preview" href="#" title="Preview file">
        <i class="far fa-eye"></i>
    </a>
</template>

{% endblock %}